# kafka-project2 - Calculator Service

## ๐ ะะฟะธัะฐะฝะธะต

**kafka-project2** - ััะพ ัะตัะฒะธั ะฒััะธัะปะตะฝะธะน, ะบะพัะพััะน ะฟะพะปััะฐะตั ะทะฐะดะฐัะธ ะฝะฐ ัะผะฝะพะถะตะฝะธะต ะผะฐััะธั ะธะท Kafka, ะพะฑัะฐะฑะฐััะฒะฐะตั ะธั ัะตัะตะท Bull Queue (Redis), ะฒัะฟะพะปะฝัะตั ะฒััะธัะปะตะฝะธั ะธ ะพัะฟัะฐะฒะปัะตั ัะตะทัะปััะฐัั ะพะฑัะฐัะฝะพ ะฒ Kafka.

## ๐ฏ ะะพะปั ะฒ ะฐััะธัะตะบัััะต

ะญัะพั ัะตัะฒะธั ัะฒะปัะตััั **ะพะฑัะฐะฑะพััะธะบะพะผ ะทะฐะดะฐั** (worker). ะะฝ:

1. **ะะพะปััะฐะตั ะทะฐะดะฐัะธ ะธะท Kafka** ะธะท ัะพะฟะธะบะฐ `matrix-multiplication-request`
2. **ะะพะฑะฐะฒะปัะตั ะทะฐะดะฐัะธ ะฒ Bull Queue** (Redis) ะดะปั ะฐัะธะฝััะพะฝะฝะพะน ะพะฑัะฐะฑะพัะบะธ
3. **ะะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะดะฐัะธ** ัะตัะตะท `MatrixProcessor` (Bull Queue processor)
4. **ะัะฟะพะปะฝัะตั ัะผะฝะพะถะตะฝะธะต ะผะฐััะธั** ัะตัะตะท `MatrixCalculatorService`
5. **ะัะฟัะฐะฒะปัะตั ัะตะทัะปััะฐัั** ะฒ Kafka ะฒ ัะพะฟะธะบ `matrix-multiplication-response`

## ๐๏ธ ะััะธัะตะบัััะฐ ัะตัะฒะธัะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Apache Kafka                    โ
โ   Topic: matrix-multiplication-request   โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ Kafka Consumer
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      KafkaConsumerService               โ
โ   - ะะพะปััะตะฝะธะต ะทะฐะดะฐัะธ ะธะท Kafka          โ
โ   - ะะฐััะธะฝะณ JSON ัะพะพะฑัะตะฝะธั              โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ processMatrixMultiplication()
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      MatrixService                      โ
โ   - ะะพะฑะฐะฒะปะตะฝะธะต ะทะฐะดะฐัะธ ะฒ Bull Queue      โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ Bull Queue (Redis)
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      MatrixProcessor                    โ
โ   - ะะฑัะฐะฑะพัะบะฐ ะทะฐะดะฐัะธ ะธะท ะพัะตัะตะดะธ         โ
โ   - ะัะทะพะฒ MatrixCalculatorService        โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ multiplyMatrices()
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  MatrixCalculatorService                โ
โ   - ะัะฟะพะปะฝะตะฝะธะต ัะผะฝะพะถะตะฝะธั ะผะฐััะธั          โ
โ   - ะะพะทะฒัะฐั ัะตะทัะปััะฐัะฐ                  โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ ะะตะทัะปััะฐั
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      MatrixProcessor                    โ
โ   - ะัะฟัะฐะฒะบะฐ ัะตะทัะปััะฐัะฐ ะฒ Kafka         โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ Kafka Producer
               โ Topic: matrix-multiplication-response
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Apache Kafka                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
kafka-project2/
โโโ src/
โ   โโโ main.ts                          # ะขะพัะบะฐ ะฒัะพะดะฐ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ app.module.ts                    # ะะพัะฝะตะฒะพะน ะผะพะดัะปั
โ   โโโ config/
โ   โ   โโโ config.module.ts            # ะะพะดัะปั ะบะพะฝัะธะณััะฐัะธะธ
โ   โ   โโโ config.validation.ts        # ะกัะตะผะฐ ะฒะฐะปะธะดะฐัะธะธ env ะฟะตัะตะผะตะฝะฝัั
โ   โ   โโโ kafka.config.ts             # ะะพะฝัะธะณััะฐัะธั Kafka
โ   โ   โโโ redis.config.ts             # ะะพะฝัะธะณััะฐัะธั Redis
โ   โโโ core/
โ       โโโ kafka/
โ       โ   โโโ kafka.module.ts          # ะะพะดัะปั Kafka
โ       โ   โโโ kafka-producer.service.ts # ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธะน ะฒ Kafka
โ       โ   โโโ kafka-consumer.service.ts # ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธะน ะธะท Kafka
โ       โโโ matrix/
โ           โโโ matrix.module.ts         # ะะพะดัะปั ะผะฐััะธั (ั Bull Queue)
โ           โโโ matrix.service.ts        # ะะพะฑะฐะฒะปะตะฝะธะต ะทะฐะดะฐั ะฒ ะพัะตัะตะดั
โ           โโโ matrix-processor.processor.ts # Bull Queue processor
โ           โโโ matrix-calculator.service.ts # ะะพะณะธะบะฐ ัะผะฝะพะถะตะฝะธั ะผะฐััะธั
โโโ package.json
โโโ README.md
```

## ๐ง ะะพะผะฟะพะฝะตะฝัั ัะตัะฒะธัะฐ

### 1. MatrixService

**ะคะฐะนะป:** `src/core/matrix/matrix.service.ts`

ะกะตัะฒะธั, ะบะพัะพััะน ะฟะพะปััะฐะตั ะทะฐะดะฐัะธ ะธะท Kafka ะธ ะดะพะฑะฐะฒะปัะตั ะธั ะฒ Bull Queue.

**ะัะฝะพะฒะฝัะต ะผะตัะพะดั:**

- `processMatrixMultiplication(id, matrixA, matrixB)` - ะะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะดะฐัั ะธะท Kafka
  - ะะพะปััะฐะตั ะทะฐะดะฐัั ะพั `KafkaConsumerService`
  - ะะพะฑะฐะฒะปัะตั ะทะฐะดะฐัั ะฒ Bull Queue ัะตัะตะท `matrixQueue.add()`
  - ะะพะณะธััะตั ะดะพะฑะฐะฒะปะตะฝะธะต ะทะฐะดะฐัะธ

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะัะฟะพะปัะทัะตั `@InjectQueue('matrix-queue')` ะดะปั ะธะฝัะตะบัะธะธ Bull Queue
- ะะต ะฒัะฟะพะปะฝัะตั ะฒััะธัะปะตะฝะธั ะฝะฐะฟััะผัั, ัะพะปัะบะพ ะดะพะฑะฐะฒะปัะตั ะฒ ะพัะตัะตะดั
- ะญัะพ ะฟะพะทะฒะพะปัะตั ะบะพะฝััะพะปะธัะพะฒะฐัั ะฝะฐะณััะทะบั ะธ ะพะฑัะฐะฑะฐััะฒะฐัั ะทะฐะดะฐัะธ ะฐัะธะฝััะพะฝะฝะพ

### 2. MatrixProcessor

**ะคะฐะนะป:** `src/core/matrix/matrix-processor.processor.ts`

Bull Queue processor, ะบะพัะพััะน ะพะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะดะฐัะธ ะธะท ะพัะตัะตะดะธ.

**ะัะฝะพะฒะฝัะต ะผะตัะพะดั:**

- `handleMatrixMultiplication(job)` - ะะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะดะฐัั ัะผะฝะพะถะตะฝะธั ะผะฐััะธั
  - ะะทะฒะปะตะบะฐะตั ะดะฐะฝะฝัะต ะธะท job: `id`, `matrixA`, `matrixB`
  - ะัะทัะฒะฐะตั `MatrixCalculatorService.multiplyMatrices()`
  - ะัะฟัะฐะฒะปัะตั ัะตะทัะปััะฐั ะฒ Kafka ัะตัะตะท `KafkaProducerService`
  - ะะฑัะฐะฑะฐััะฒะฐะตั ะพัะธะฑะบะธ ะธ ะพัะฟัะฐะฒะปัะตั ะธั ะฒ Kafka

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะัะฟะพะปัะทัะตั ะดะตะบะพัะฐัะพั `@Processor('matrix-queue')` ะดะปั ัะตะณะธัััะฐัะธะธ processor
- ะัะฟะพะปัะทัะตั ะดะตะบะพัะฐัะพั `@Process('multiply')` ะดะปั ะพะฑัะฐะฑะพัะบะธ ะทะฐะดะฐั ัะธะฟะฐ 'multiply'
- ะะฒัะพะผะฐัะธัะตัะบะธ ะพะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะดะฐัะธ ะธะท ะพัะตัะตะดะธ
- ะะพะดะดะตัะถะธะฒะฐะตั retry ะผะตัะฐะฝะธะทะผ Bull Queue

**ะะฝัะตััะตะนั MatrixJobData:**
```typescript
interface MatrixJobData {
  id: string;
  matrixA: number[][];
  matrixB: number[][];
}
```

### 3. MatrixCalculatorService

**ะคะฐะนะป:** `src/core/matrix/matrix-calculator.service.ts`

ะกะตัะฒะธั, ะบะพัะพััะน ะฒัะฟะพะปะฝัะตั ัะฐะบัะธัะตัะบะพะต ัะผะฝะพะถะตะฝะธะต ะผะฐััะธั.

**ะัะฝะพะฒะฝัะต ะผะตัะพะดั:**

- `multiplyMatrices(matrixA, matrixB)` - ะฃะผะฝะพะถะฐะตั ะดะฒะต ะผะฐััะธัั
  - ะัะพะฒะตััะตั ะฒะพะทะผะพะถะฝะพััั ัะผะฝะพะถะตะฝะธั (colsA === rowsB)
  - ะะฝะธัะธะฐะปะธะทะธััะตั ัะตะทัะปััะธัััััั ะผะฐััะธัั
  - ะัะฟะพะปะฝัะตั ััะพะนะฝะพะน ัะธะบะป ะดะปั ัะผะฝะพะถะตะฝะธั
  - ะะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั

**ะะปะณะพัะธัะผ ัะผะฝะพะถะตะฝะธั:**
```typescript
for (let i = 0; i < rowsA; i++) {
  for (let j = 0; j < colsB; j++) {
    for (let k = 0; k < colsA; k++) {
      result[i][j] += matrixA[i][k] * matrixB[k][j];
    }
  }
}
```

**ะะฐะปะธะดะฐัะธั:**
- ะัะพะฒะตััะตั, ััะพ ะบะพะปะธัะตััะฒะพ ััะพะปะฑัะพะฒ ะฟะตัะฒะพะน ะผะฐััะธัั ัะฐะฒะฝะพ ะบะพะปะธัะตััะฒั ัััะพะบ ะฒัะพัะพะน
- ะัะฑัะฐััะฒะฐะตั ะพัะธะฑะบั, ะตัะปะธ ะผะฐััะธัั ะฝะตะปัะทั ัะผะฝะพะถะธัั

### 4. KafkaConsumerService

**ะคะฐะนะป:** `src/core/kafka/kafka-consumer.service.ts`

ะกะตัะฒะธั ะดะปั ะฟะพะปััะตะฝะธั ัะพะพะฑัะตะฝะธะน ะธะท Kafka.

**ะัะฝะพะฒะฝัะต ะผะตัะพะดั:**

- `subscribe(topic, callback)` - ะะพะดะฟะธััะฒะฐะตััั ะฝะฐ ัะพะฟะธะบ
  - ะงะธัะฐะตั ัะพะพะฑัะตะฝะธั ั ะฝะฐัะฐะปะฐ ัะพะฟะธะบะฐ
  - ะะฐััะธั JSON ัะพะพะฑัะตะฝะธั
  - ะัะทัะฒะฐะตั callback ะดะปั ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะัะฟะพะปัะทัะตั Consumer Group ะดะปั ะฑะฐะปะฐะฝัะธัะพะฒะบะธ ะฝะฐะณััะทะบะธ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะฟะพะดะบะปััะตะฝะธะต ะฟัะธ ะพัะธะฑะบะฐั
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ะฟะพะปััะตะฝะฝัั ัะพะพะฑัะตะฝะธะน

### 5. KafkaProducerService

**ะคะฐะนะป:** `src/core/kafka/kafka-producer.service.ts`

ะกะตัะฒะธั ะดะปั ะพัะฟัะฐะฒะบะธ ัะพะพะฑัะตะฝะธะน ะฒ Kafka.

**ะัะฝะพะฒะฝัะต ะผะตัะพะดั:**

- `sendMessage(topic, message)` - ะัะฟัะฐะฒะปัะตั ัะพะพะฑัะตะฝะธะต ะฒ ัะบะฐะทะฐะฝะฝัะน ัะพะฟะธะบ
  - ะกะตัะธะฐะปะธะทัะตั ัะพะพะฑัะตะฝะธะต ะฒ JSON
  - ะัะฟะพะปัะทัะตั ID ัะพะพะฑัะตะฝะธั ะบะฐะบ ะบะปัั
  - ะะพะณะธััะตั ะพัะฟัะฐะฒะบั

**ะคะพัะผะฐั ัะพะพะฑัะตะฝะธั ัะตะทัะปััะฐัะฐ:**
```json
{
  "id": "abc-123-def-456",
  "result": [[19, 22], [43, 50]],
  "status": "completed"
}
```

**ะคะพัะผะฐั ัะพะพะฑัะตะฝะธั ะพัะธะฑะบะธ:**
```json
{
  "id": "abc-123-def-456",
  "result": null,
  "status": "error",
  "error": "Error message"
}
```

### 6. Main.ts

**ะคะฐะนะป:** `src/main.ts`

ะขะพัะบะฐ ะฒัะพะดะฐ ะฟัะธะปะพะถะตะฝะธั. ะะฐัััะฐะธะฒะฐะตั:

1. **Validation Pipe** - ะะปะพะฑะฐะปัะฝะฐั ะฒะฐะปะธะดะฐัะธั
2. **Kafka Consumer** - ะะพะดะฟะธัะบะฐ ะฝะฐ ัะพะฟะธะบ ะทะฐะฟัะพัะพะฒ
   ```typescript
   await kafkaConsumer.subscribe(requestTopic, async (message) => {
     const { id, matrixA, matrixB } = message;
     await matrixService.processMatrixMultiplication(
       id,
       matrixA.data,
       matrixB.data,
     );
   });
   ```
3. **ะะฐะดะตัะถะบะฐ ะธะฝะธัะธะฐะปะธะทะฐัะธะธ** - 3 ัะตะบัะฝะดั ะดะปั ะฟะพะปะฝะพะน ะธะฝะธัะธะฐะปะธะทะฐัะธะธ Kafka ะธ Redis

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (.env)

| ะะตัะตะผะตะฝะฝะฐั | ะะฟะธัะฐะฝะธะต | ะะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั |
|-----------|----------|----------------------|
| `PORT` | ะะพัั HTTP ัะตัะฒะตัะฐ | `3001` |
| `KAFKA_BROKER` | ะะดัะตั Kafka ะฑัะพะบะตัะฐ | `localhost:9092` |
| `KAFKA_CLIENT_ID` | ID ะบะปะธะตะฝัะฐ Kafka | `kafka-project2` |
| `KAFKA_GROUP_ID` | ID ะณััะฟะฟั consumer | `matrix-calculator-group` |
| `KAFKA_REQUEST_TOPIC` | ะขะพะฟะธะบ ะดะปั ะฟะพะปััะตะฝะธั ะทะฐะฟัะพัะพะฒ | `matrix-multiplication-request` |
| `KAFKA_RESPONSE_TOPIC` | ะขะพะฟะธะบ ะดะปั ะพัะฟัะฐะฒะบะธ ะพัะฒะตัะพะฒ | `matrix-multiplication-response` |
| `REDIS_HOST` | ะะดัะตั Redis | `localhost` |
| `REDIS_PORT` | ะะพัั Redis | `6379` |

### ะัะธะผะตั .env ัะฐะนะปะฐ

```env
PORT=3001
KAFKA_BROKER=localhost:9092
KAFKA_CLIENT_ID=kafka-project2
KAFKA_GROUP_ID=matrix-calculator-group
KAFKA_REQUEST_TOPIC=matrix-multiplication-request
KAFKA_RESPONSE_TOPIC=matrix-multiplication-response
REDIS_HOST=localhost
REDIS_PORT=6379
```

## ๐ ะะพัะพะบ ะพะฑัะฐะฑะพัะบะธ ะทะฐะดะฐัะธ

### 1. ะะพะปััะตะฝะธะต ะทะฐะดะฐัะธ ะธะท Kafka

KafkaConsumerService ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธะต ะธะท ัะพะฟะธะบะฐ `matrix-multiplication-request`:

```json
{
  "id": "abc-123-def-456",
  "matrixA": { "data": [[1, 2], [3, 4]] },
  "matrixB": { "data": [[5, 6], [7, 8]] }
}
```

### 2. MatrixService ะดะพะฑะฐะฒะปัะตั ะทะฐะดะฐัั ะฒ ะพัะตัะตะดั

```typescript
await matrixQueue.add('multiply', {
  id: "abc-123-def-456",
  matrixA: [[1, 2], [3, 4]],
  matrixB: [[5, 6], [7, 8]]
});
```

ะะฐะดะฐัะฐ ัะพััะฐะฝัะตััั ะฒ Redis ะธ ะฟะพะฟะฐะดะฐะตั ะฒ ะพัะตัะตะดั `matrix-queue`.

### 3. MatrixProcessor ะพะฑัะฐะฑะฐััะฒะฐะตั ะทะฐะดะฐัั

Bull Queue ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒัะทัะฒะฐะตั `handleMatrixMultiplication()` ะบะพะณะดะฐ ะทะฐะดะฐัะฐ ะณะพัะพะฒะฐ ะบ ะพะฑัะฐะฑะพัะบะต.

### 4. MatrixCalculatorService ะฒัะฟะพะปะฝัะตั ะฒััะธัะปะตะฝะธั

```typescript
const result = matrixCalculator.multiplyMatrices(
  [[1, 2], [3, 4]],
  [[5, 6], [7, 8]]
);
// ะะตะทัะปััะฐั: [[19, 22], [43, 50]]
```

### 5. ะัะฟัะฐะฒะบะฐ ัะตะทัะปััะฐัะฐ ะฒ Kafka

MatrixProcessor ะพัะฟัะฐะฒะปัะตั ัะตะทัะปััะฐั ะฒ ัะพะฟะธะบ `matrix-multiplication-response`:

```json
{
  "id": "abc-123-def-456",
  "result": [[19, 22], [43, 50]],
  "status": "completed"
}
```

### 6. ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

ะัะปะธ ะฟัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ (ะฝะฐะฟัะธะผะตั, ะผะฐััะธัั ะฝะตะปัะทั ัะผะฝะพะถะธัั), ะพัะฟัะฐะฒะปัะตััั ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต:

```json
{
  "id": "abc-123-def-456",
  "result": null,
  "status": "error",
  "error": "Cannot multiply matrices: columns of A (2) must equal rows of B (3)"
}
```

## ๐ Bull Queue

### ะงัะพ ัะฐะบะพะต Bull Queue?

Bull Queue - ััะพ ะฑะธะฑะปะธะพัะตะบะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะพัะตัะตะดัะผะธ ะทะฐะดะฐั ะฝะฐ ะพัะฝะพะฒะต Redis. ะะฝะฐ ะฟัะตะดะพััะฐะฒะปัะตั:

- **ะัะธะฝััะพะฝะฝัั ะพะฑัะฐะฑะพัะบั** ะทะฐะดะฐั
- **Retry ะผะตัะฐะฝะธะทะผ** ะฟัะธ ะพัะธะฑะบะฐั
- **ะัะธะพัะธัะตัั ะทะฐะดะฐั**
- **ะะฐะดะตัะถะบะธ ะฒัะฟะพะปะฝะตะฝะธั**
- **ะะพะฝะธัะพัะธะฝะณ** ัะพััะพัะฝะธั ะพัะตัะตะดะธ

### ะะฐัััะพะนะบะฐ Bull Queue

ะ `matrix.module.ts`:

```typescript
BullModule.forRoot({
  redis: {
    host: configService.get('redis.host'),
    port: configService.get('redis.port'),
  },
}),
BullModule.registerQueue({
  name: 'matrix-queue',
}),
```

### ะัะตะธะผััะตััะฒะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั Bull Queue

1. **ะะพะฝััะพะปั ะฝะฐะณััะทะบะธ** - ะะพะถะฝะพ ะพะณัะฐะฝะธัะธัั ะบะพะปะธัะตััะฒะพ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะพะฑัะฐะฑะฐััะฒะฐะตะผัั ะทะฐะดะฐั
2. **Retry ะผะตัะฐะฝะธะทะผ** - ะะฒัะพะผะฐัะธัะตัะบะธะต ะฟะพะฒัะพัั ะฟัะธ ะพัะธะฑะบะฐั
3. **ะะฐัััะฐะฑะธััะตะผะพััั** - ะะพะถะฝะพ ะทะฐะฟัััะธัั ะฝะตัะบะพะปัะบะพ ะฒะพัะบะตัะพะฒ
4. **ะะพะฝะธัะพัะธะฝะณ** - ะะธะดะธะผะพััั ัะพััะพัะฝะธั ะพัะตัะตะดะธ
5. **ะะฐะดะตะถะฝะพััั** - ะะฐะดะฐัะธ ัะพััะฐะฝััััั ะฒ Redis ะธ ะฝะต ัะตัััััั ะฟัะธ ะฟะตัะตะทะฐะฟััะบะต

## ๐ ะะฐะฟััะบ ัะตัะฒะธัะฐ

### ะะฐะทัะฐะฑะพัะบะฐ

```bash
npm run start:dev
```

ะกะตัะฒะธั ะฑัะดะตั ะดะพัััะฟะตะฝ ะฝะฐ http://localhost:3001

**ะะฐะถะฝะพ:** ะฃะฑะตะดะธัะตัั, ััะพ Redis ะทะฐะฟััะตะฝ:
```bash
docker-compose up -d redis
```

### ะัะพะดะฐะบัะฝ

```bash
npm run build
npm run start:prod
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### Unit ัะตััั

```bash
npm run test
```

### E2E ัะตััั

```bash
npm run test:e2e
```

### ะะพะบัััะธะต ะบะพะดะฐ

```bash
npm run test:cov
```

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะพัะปะฐะดะบะฐ

### ะะพะณะธ

ะกะตัะฒะธั ะธัะฟะพะปัะทัะตั ะฒัััะพะตะฝะฝัะน Logger NestJS. ะัะต ะฒะฐะถะฝัะต ัะพะฑััะธั ะปะพะณะธัััััั:

- ะะพะปััะตะฝะธะต ะทะฐะดะฐั ะธะท Kafka
- ะะพะฑะฐะฒะปะตะฝะธะต ะทะฐะดะฐั ะฒ ะพัะตัะตะดั
- ะะฐัะฐะปะพ ะพะฑัะฐะฑะพัะบะธ ะทะฐะดะฐัะธ
- ะะฐะฒะตััะตะฝะธะต ะฒััะธัะปะตะฝะธะน
- ะัะฟัะฐะฒะบะฐ ัะตะทัะปััะฐัะพะฒ ะฒ Kafka
- ะัะธะฑะบะธ ะพะฑัะฐะฑะพัะบะธ

### ะัะธะผะตัั ะปะพะณะพะฒ

```
[MatrixService] Adding matrix multiplication job abc-123 to queue
[MatrixProcessor] Processing matrix multiplication job abc-123
[MatrixCalculatorService] Starting matrix multiplication calculation
[MatrixCalculatorService] Matrix multiplication completed
[KafkaProducerService] Message sent to topic matrix-multiplication-response
[MatrixProcessor] Matrix multiplication job abc-123 completed successfully
```

### ะะพะฝะธัะพัะธะฝะณ Bull Queue

ะะปั ะผะพะฝะธัะพัะธะฝะณะฐ Bull Queue ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั:
- [Bull Board](https://github.com/felixmosh/bull-board) - ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ
- Redis CLI - ะััะผะพะน ะฟัะพัะผะพัั ะดะฐะฝะฝัั ะฒ Redis

## โ๏ธ ะะฐะถะฝัะต ะทะฐะผะตัะฐะฝะธั

1. **Redis ะพะฑัะทะฐัะตะปะตะฝ**: Bull Queue ััะตะฑัะตั Redis ะดะปั ัะฐะฑะพัั. ะฃะฑะตะดะธัะตัั, ััะพ Redis ะทะฐะฟััะตะฝ ะฟะตัะตะด ะทะฐะฟััะบะพะผ ัะตัะฒะธัะฐ.

2. **Consumer Group**: ะัะฟะพะปัะทัะตััั ะดะปั ะฑะฐะปะฐะฝัะธัะพะฒะบะธ ะฝะฐะณััะทะบะธ. ะัะปะธ ะทะฐะฟัััะธัั ะฝะตัะบะพะปัะบะพ ะธะฝััะฐะฝัะพะฒ ัะตัะฒะธัะฐ, ะพะฝะธ ะฑัะดัั ัะฐัะฟัะตะดะตะปััั ะทะฐะดะฐัะธ ะผะตะถะดั ัะพะฑะพะน.

3. **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ**: ะัะธะฑะบะธ ะฟัะธ ะฒััะธัะปะตะฝะธัั ะปะพะณะธัััััั ะธ ะพัะฟัะฐะฒะปััััั ะฒ Kafka, ััะพะฑั kafka-project1 ะผะพะณ ะพะฑะฝะพะฒะธัั ััะฐััั.

4. **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั**: ะะปั ะฑะพะปััะธั ะผะฐััะธั (100x100 ะธ ะฑะพะปััะต) ะฒััะธัะปะตะฝะธั ะผะพะณัั ะทะฐะฝััั ะฒัะตะผั. Bull Queue ะฟะพะทะฒะพะปัะตั ะบะพะฝััะพะปะธัะพะฒะฐัั ะฝะฐะณััะทะบั.

5. **ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต**: ะะพะถะฝะพ ะทะฐะฟัััะธัั ะฝะตัะบะพะปัะบะพ ะธะฝััะฐะฝัะพะฒ ัะตัะฒะธัะฐ ะดะปั ะฟะฐัะฐะปะปะตะปัะฝะพะน ะพะฑัะฐะฑะพัะบะธ ะทะฐะดะฐั.

## ๐ ะกะฒัะทะฐะฝะฝัะต ะบะพะผะฟะพะฝะตะฝัั

- **kafka-project1** - API ัะตัะฒะธั, ะบะพัะพััะน ะพัะฟัะฐะฒะปัะตั ะทะฐะดะฐัะธ
- **Apache Kafka** - ะัะพะบะตั ัะพะพะฑัะตะฝะธะน
- **Redis** - ะฅัะฐะฝะธะปะธัะต ะดะปั Bull Queue
- **Bull Queue** - ะะธะฑะปะธะพัะตะบะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะพัะตัะตะดัะผะธ

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะตััััั

- [ะะพะบัะผะตะฝัะฐัะธั NestJS](https://docs.nestjs.com/)
- [ะะพะบัะผะตะฝัะฐัะธั Bull Queue](https://github.com/OptimalBits/bull)
- [ะะพะบัะผะตะฝัะฐัะธั KafkaJS](https://kafka.js.org/)
- [ะะพะบัะผะตะฝัะฐัะธั Redis](https://redis.io/docs/)

## ๐ ะงัะพ ะธะทััะฐะตััั ะฒ ััะพะผ ัะตัะฒะธัะต

1. **ะะฐะฑะพัะฐ ั Kafka Consumer** - ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธะน ะธะท ัะพะฟะธะบะพะฒ
2. **Bull Queue** - ะฃะฟัะฐะฒะปะตะฝะธะต ะพัะตัะตะดัะผะธ ะทะฐะดะฐั
3. **ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ** - ะะฐะทะดะตะปะตะฝะธะต ะฟะพะปััะตะฝะธั ะธ ะพะฑัะฐะฑะพัะบะธ ะทะฐะดะฐั
4. **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ** - ะะพััะตะบัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะธ ะฟะตัะตะดะฐัะฐ ะพัะธะฑะพะบ
5. **ะะฐัััะฐะฑะธััะตะผะพััั** - ะะพะทะผะพะถะฝะพััั ะทะฐะฟััะบะฐ ะฝะตัะบะพะปัะบะธั ะฒะพัะบะตัะพะฒ
